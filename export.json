{"objects":[{"jobObject":{"JobType":".OrchestrationJob","id":46306,"revision":6,"created":1581660603179,"timestamp":1581660603179,"components":{"46309":{"id":46309,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-384,"y":-144,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[46312,46313],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"46310":{"id":46310,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-30576616,"x":-192,"y":-96,"width":32,"height":32,"inputConnectorIDs":[46313],"outputSuccessConnectorIDs":[46438],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Bash Script"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#Amin S\n#Rest API call to Export Matillion Job\n\n#export\ncurl -o amin_poc.json -X GET -u t_tirup:autodesk123 \"http://localhost:8080/rest/v1/group/name/icm/project/name/icm_poc/version/name/default/job/name/poc/export\"\n\n"}}}},"visible":true},"3":{"slot":3,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true}},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"46311":{"id":46311,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-192,"y":-208,"width":32,"height":32,"inputConnectorIDs":[46312],"outputSuccessConnectorIDs":[46402],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#Amin S\n#Rest API call to export Matiilion Job and push it to S3 location\n\nimport json\nfrom botocore.vendored import requests\nimport boto3\n\ns3 = boto3.resource('s3')\n\n\nresponse = requests.get('http://127.0.0.1:8080/rest/v1/group/name/icm/project/name/icm_poc/version/name/default/job/name/event_ingestion/export', auth=('t_tirup', 'autodesk123'))\ndata = response.json()\nobj = json.dumps(data)\nprint(obj)\n\n#bucket.put_object(Key='output/rest.json', Body=data, ContentType='text/csv', ContentEncoding='utf-8')\nbucket = s3.Bucket('amin-icm-poc')\nobject = s3.Object('amin-icm-poc', 'output/rest.json')\nobject.put(Body=obj)\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"46401":{"id":46401,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-70,"y":-207,"width":32,"height":32,"inputConnectorIDs":[46402],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python Script 0"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"46437":{"id":46437,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-72,"y":-98,"width":32,"height":32,"inputConnectorIDs":[46438],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python Script 1"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"46402":{"id":46402,"sourceID":46311,"targetID":46401},"46438":{"id":46438,"sourceID":46310,"targetID":46437}},"failureConnectors":{},"unconditionalConnectors":{"46312":{"id":46312,"sourceID":46309,"targetID":46311},"46313":{"id":46313,"sourceID":46309,"targetID":46310}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"canUndo":true,"undoCommand":"Create Component","undoCreated":1581659734671,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"46307":{"id":46307,"x":-180,"y":-322,"width":377,"height":76,"text":"Approach #1 : Python Script\n Rest API Call to Export Matillion job in JSON format. And final output file will be available in S3 location.\n\nS3 path ::  amin-icm-poc/output/rest.json","colour":"e6e63c"},"46308":{"id":46308,"x":-196,"y":-55,"width":381,"height":76,"text":"Approach #2 Bash Script\nRest API Call to Export Matiilion job in JSON format. And final output is available at Ec2 Instance.\n","colour":"e6e63c"}},"variables":{},"grids":{}},"info":{"id":46306,"name":"Matillion_job_Export_test_neeraj","description":"Matillion_job_Export_test_neeraj","type":"ORCHESTRATION"},"path":["ICM_Amin","CICD"]}],"version":"1.42.7","environment":"redshift"}